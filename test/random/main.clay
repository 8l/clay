import test.*;
import random.*;

// WARNING: This test suite may fail randomly. Care is taken to assure that the probability of it doing so 
// is relatively low in the case that there is a genuine failure (<= 2^-64 is the general goal).
// Failures in this test suite that do not reooccur on rerunning are troubling but not necessarily a major problem. 
main() = testMain(
  TestSuite("Random number generation", [
    TestCase("consecutive runs from the same RNG", test => {
      var rng = XORShiftRNG();

      expectNotEqual(test, "two runs", random(rng, UInt64), random(rng, UInt64)); 
    }),

    TestCase("Independent runs from a copy", test => {
      var rng = XORShiftRNG();
      var rng2 = rng;

      expectEqual(test, "independent runs", random(rng, UInt64), random(rng2, UInt64));
    }),

    TestCase("runs from two RNGs created consecutively", test => {
      var rng = XORShiftRNG();
      var rng2 = XORShiftRNG();

      expectNotEqual(test, "two runs", random(rng, UInt64), random(rng2, UInt64)); 
    }),
    
  ])
);
