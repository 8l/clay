
import clay.tokens.*;
import clay.lexer.*;
import clay.ast.*;
import clay.parser.*;
import clay.errors.*;

main(args) {
    if (size(args) != 2) {
        println("usage: ", args[0], " <clayfile>");
        return -1;
    }
    try {
        var ast = parse(tokenize(readSource(args[1])));
        println(ast^.imports);
        println(ast^.topLevelItems);
    }
    catch (e:LexerError) {
        displayError(e);
    }
    catch (e:ParserError) {
        displayError(e);
    }
    return 0;
}
