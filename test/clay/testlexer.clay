
import clay.lexer.*;
import clay.errors.*;

main(args) {
    if (size(args) != 2) {
        println("usage: ", args[0], " <clayfile>");
        return -1;
    }
    var fileName = args[1];
    var data = readAll(File(fileName));
    var input = LexerInput(data);
    try {
        var tokens = tokenize(input);
        for (token in tokens) {
            var kind = token.kind;
            if ((kind == SPACE) or (kind == COMMENT))
                continue;
            println(kind, ": ", token.data);
        }
    }
    catch (e:LexerError) {
        var offset = e.where - &data[0];
        displayError(fileName, data, offset, "invalid token");
    }
    return 0;
}
