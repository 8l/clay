import threads.future.*;
import test.*;

main() = testMain(
    TestSuite("threads.future", array(
        TestCase("futureGet", test -> {
            var x = 1;
            var future = async(-> x + 3);
            var r = futureGet(future);
            expectEqual(test, "futureGet", 4, r);
        }),
        TestCase("futureGet multiple", test -> {
            var future = async(-> { return 1, true, 'a'; });
            var one, yes, a = futureGet(future);
            expectEqual(test, "futureGet", [1, true, 'a'], [one, yes, a]);
        }),
    )));
