import cocoa.objc.*;

record NSObject = externalClass(Void);
overload selector(static #"alloc") = Id;
overload selector(static #"init") = Id;
overload selector(static #"description") = NSString;

record NSString = externalClass(NSObject);
overload selector(static #"stringWithUTF8String:") = Id, Pointer[CChar];
overload varargSelector(static #"stringWithFormat:") = Id, NSString; 
overload selector(static #"UTF8String") = Pointer[CChar];

record NSNumber = externalClass(NSObject);
overload selector(static #"numberWithInt:") = Id, Int;

record NSAutoreleasePool = externalClass(NSObject);

main() {
    var pool = NSAutoreleasePool.alloc().init();

    var format = NSString.stringWithUTF8String(cstring("%@ didn't start the fire"));
    var n = NSNumber.numberWithInt(451);

    var formattedString = NSString.stringWithFormat(format, n);

    println(CStringRef(formattedString.UTF8String()));
}
