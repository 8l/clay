import libc;

public import unix.generated.*;
public import unix.constants.*;
public import unix.errno.*;

inlined syscall(callable, ...) {
    var result = callable(...);
    if (result == Type(result)(-1))
        error(errorMessage());
    return result;
}

overloadable errorMessage;

overload errorMessage() = errorMessage(errno());
overload errorMessage(err) = stringRef(libc.strerror(err));
