import types.*;
import libc;
import strings;
import errors;

public import unix.wrappers.*;
public import unix.constants.*;
public import unix.errno.*;

inlined syscall(callable, ...) {
    var result = callable(...);
    if (result == TypeOf(result)(-1))
        errors.error(errorMessage());
    return result;
}

overloadable errorMessage;

overload errorMessage() = errorMessage(errno());
overload errorMessage(err) = strings.stringRef(libc.strerror(err));
