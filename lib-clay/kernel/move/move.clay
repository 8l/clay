import kernel.operators.*;

overloadable move;

overload move[T](dest:T, src:T) {
    copy(dest, src);
    destroy(src);
}

record Movable[T](data:Pointer[T]);

overload move[T](a:T) = Movable(&a);

overload deref[T](a:Movable[T]) = ref deref(a.data);
