import newclay.common.*;
import newclay.lexer.*;

external lexer_tokenize(filep:Pointer[SourceFile], returnedp:Pointer[SourceTokens]) {
    ref file = filep^;
    ref returned = returnedp^;

    var tokens = tokenizeAll(file);
    tokens.vector = Vector(filtered(
        x => (x.kind != SPACE) and (x.kind != COMMENT),
        tokens.vector,
    ));

    returned <-- move(tokens);
}
