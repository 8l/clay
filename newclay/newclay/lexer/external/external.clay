import newclay.common.*;
import newclay.lexer.*;
import externals.*;

private impl_tokenize(file:SourceFile) {
    var tokens = tokenizeAll(file);
    tokens.vector = Vector(filtered(
        x => (x.kind != SPACE) and (x.kind != COMMENT),
        tokens.vector,
    ));

    return move(tokens);
}

external lexer_tokenize(
    ex:ExternalException,
    inFile:Pointer[SourceFile],
    out:Pointer[SourceTokens]
) {
    wrapAsExternal(impl_tokenize, static 1, ex, inFile, out);
}

